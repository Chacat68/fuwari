---
title: 在 Godot 中开始使用等距瓦片地图：快速指南
published: 2025-03-22 22:43:00
updated: 2025-03-22 22:43:00
description: '本文介绍了等距投影的概念及其在游戏中的应用，并详细讲解了如何在 Godot 引擎中配置和使用等距瓦片地图。文章涵盖了瓦片地图节点的基本设置、Y 排序、瓦片大小配置、多瓦片对象创建以及瓦片地图层的使用等高级功能。'
image: 'https://blog-1259751088.cos.ap-shanghai.myqcloud.com/20250501170818848.png?imageSlim'
tags: [游戏开发, Godot引擎, 等距投影, 瓦片地图, 2D游戏]
category: '它山之石'
draft: false
---

等距游戏最早出现在 20 世纪 70 年代末。从《模拟城市》到《文明》，这种视角在策略、模拟和 RPG 游戏中都很常见。如今独立开发者和大型工作室仍在使用这种技术。

这篇文章先简单介绍等距投影的原理，然后重点讲解如何在 Godot 中使用瓦片地图节点制作等距游戏。

## 什么是等距投影？

等距投影把 3D 世界投射到 2D 平面上。它属于正交投影，物体不会随距离变化而改变大小——远处的物体和近处的物体看起来一样大。这是因为等距投影没有消失点，物体的每个轴都与世界轴平行。

透视投影就不一样了：远处的物体会变小，近处的物体会变大，这更接近人眼的观察方式。

如果需要更详细的解释，可以参考《等距游戏的最佳示例及其工作原理》。

**相机投影类型**

### 经典的等距游戏

策略游戏和城市建设者经常使用等距视角。你可以看看《红色警戒 2》、《帝国时代》系列、《模拟城市》、《博德之门》这些经典作品。它们的相机角度始终保持不变，无论物体远近，大小都一样。

### 其他投影方式

除了等距投影，游戏开发中还有几种常见的投影方式：

- **透视投影**：模仿人眼视觉，近大远小。FPS、TPS、体育和赛车游戏常用。
- **俯视投影**：也叫鸟瞰图，相机从正上方往下看。原版《侠盗猎车手》就用了这种视角。
- **双等距/三等距投影**：通过调整相机角度改变物体宽高比的正交投影。

---

---

## 在 Godot 中创建等距游戏

Godot 的瓦片地图节点可以把精灵表切割成瓦片，然后按等距视角渲染到屏幕上。创建过程很简单：

1. 准备好 PNG 格式的精灵表（需要 alpha 通道），导入项目
2. 新建瓦片地图节点
3. 在检查器中创建新的瓦片集资源
4. "瓦片形状"选"等距"，"瓦片布局"和"瓦片偏移轴"保持默认
5. 在底部瓦片集面板附加精灵表图像
6. 配置瓦片集

如果有需要拼接多个瓦片的复杂对象，后面的章节会详细说明。

**瓦片集属性**

## 配置等距投影

除了设置投影类型，还需要调整几个关键参数：启用 Y 排序，并正确配置瓦片大小。

### Y 排序

Y 排序决定瓦片的绘制顺序。等距地图中，位置靠下的瓦片需要先绘制，位置靠上的后绘制——这样才能产生正确的 3D 遮挡效果。如果顺序错了，视觉效果会很奇怪。

创建等距瓦片地图后，Godot 会显示警告，提醒你启用 Y 排序。照做就好：

1. 在检查器中启用瓦片地图节点的"启用 Y 排序"（检查器 -> CanvasItem -> 排序）
2. 启用每个图层的"启用 Y 排序"（检查器 -> 瓦片地图 -> 层）

**瓦片地图排序属性**

### 瓦片集 vs 瓦片地图的瓦片大小

Godot 中"瓦片集"和"瓦片地图"的瓦片大小是两个不同的概念，搞清楚能省很多麻烦：

- **瓦片集中的瓦片大小**：精灵表中单个瓦片图像的实际像素尺寸
- **瓦片地图中的瓦片大小**：瓦片在地面上的占用面积（不包括高度部分）

因为等距瓦片会重叠，瓦片地图只需要知道瓦片的"占地面积"，这样引擎才能正确处理遮挡关系。

**瓦片大小图示**

## 高级功能

实际开发中经常会用到多瓦片对象和图层堆叠。

### 多瓦片对象

假设你的瓦片大小是 64×32，但有一棵树跨越了 3 个瓦片的高度，需要 64×96 的空间。Godot 允许你把多个瓦片组合成一个对象。

#### 定义多瓦片对象

1. 打开瓦片集编辑器，点击"设置"按钮
2. 按住 Shift 键
3. 用鼠标左键拖选要组合的瓦片
4. 松开按键，组合完成

之后你可以在瓦片地图编辑器中直接放置这个大瓦片。

**多瓦片对象**

#### 对齐网格

创建多瓦片对象后，你可能会发现放置时光标位置不太对。这是因为默认原点在瓦片中心。调整一下就好：

1. 在瓦片集编辑器中点击"选择"按钮
2. 选择那个大瓦片
3. 左侧"基础瓦片"菜单中找到"渲染"部分
4. 修改"纹理原点"向量

我习惯把原点放在左下角，这样放置时更直观。调整时瓦片上会出现菱形标记显示新原点位置。

**纹理原点设置**

### 使用图层

图层允许你在不同高度上放置瓦片而不会互相覆盖。

比如城堡场景：地板放最底层，墙壁、家具放第二层，吊灯放第三层。这样无论游戏里发生什么，桌子永远在地板上面，吊灯永远在家具上面。

**瓦片地图层列表**

#### 创建图层

1. 在检查器中点击"添加元素"（检查器 -> 瓦片地图 -> 层）
2. 给图层命名，启用"启用 Y 排序"
3. 设置"Z 索引"：数值小的在后面渲染，数值大的在前面（靠近相机）
4. 在瓦片地图编辑器右上角选择当前图层
5. 开始放置瓦片

切换图层时，非活动图层会变暗，方便你聚焦当前图层。关于图层的更多细节可以参考《Godot 4 瓦片地图层：你需要知道的一切》。

#### 图层渲染顺序

图层在列表中的位置不决定渲染顺序，"Z 索引"才是关键。层按照 Z 索引从小到大依次绘制。虽然相同 Z 索引时列表顺序会影响结果，但最好的做法是给每个层设置明确的 Z 索引，这样不会出问题。

## 总结

Godot 的等距瓦片地图功能很完善，只是界面有时候不够直观。理解了 Y 排序、瓦片大小、图层这些概念后，用起来就顺手了。

更详细的文档可以看官方教程：https://docs.godotengine.org/en/stable/tutorials/2d/using_tilemaps.html

想了解更多 Godot 和游戏开发的内容，可以逛逛 Night Quest Games 博客。

---

**引用地址**  
原文链接：https://www.nightquestgames.com/introducing-isometric-tilemaps-in-godot/

> 本站 RSS地址已更新，麻烦读者朋友们重新订阅一次喔！

---

> 💡 感谢您的观看！欢迎分享文章，或是来信与我交流。
