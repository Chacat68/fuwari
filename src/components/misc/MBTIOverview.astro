---
interface BarProps {
	leftLabel: string;
	rightLabel: string;
	leftPercent: number; // 0-100
	rightPercent: number; // 0-100
	barColor: string; // tailwind color class like 'from-sky-400 to-sky-600'
}

interface Props {
	typeBadge: string; // e.g. 'ENFP-A'
	title?: string; // e.g. 'MBti 16 Personalities overview'
	bars: BarProps[]; // 5 bars
}

const {
	typeBadge,
	title = "MBTI 16 Personalities overview",
	bars,
} = Astro.props as Props;

const clamp = (n: number) => Math.max(0, Math.min(100, Math.round(n)));
---

<div class="w-full rounded-[var(--radius-large)] bg-white/5 dark:bg-gray-800/60 border border-white/10 p-4 md:p-6 backdrop-blur-sm">
    {title && (
        <div class="mb-3 md:mb-4 text-sm md:text-base font-semibold tracking-wide text-white/90">
            {title}
        </div>
    )}

    <div class="mb-4 flex items-center gap-3">
        <div class="inline-flex items-center rounded-full border border-emerald-400/50 bg-emerald-500/10 px-4 py-2">
            <span class="text-emerald-300 text-sm md:text-base font-bold tracking-wide">{typeBadge}</span>
        </div>
    </div>

    <div class="space-y-4">
        {bars.map((b) => {
            const left = clamp(b.leftPercent);
            const right = clamp(b.rightPercent);
            const leftStyle = `width: ${left}%`;
            const rightText = `${right}%`;
            const leftText = `${left}%`;
            return (
                <div class="w-full">
                    <div class="flex items-center justify-between text-xs md:text-sm text-white/70 mb-1">
                        <div class="flex items-center gap-2">
                            <span class="font-semibold">{leftText}</span>
                        </div>
                        <div class="font-semibold">{rightText}</div>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="flex-1 h-3 md:h-3.5 rounded-full bg-white/10 overflow-hidden">
                            <div class={`h-full bg-gradient-to-r ${b.barColor}`} style={leftStyle}></div>
                        </div>
                    </div>
                    <div class="mt-1 flex items-center justify-between text-[11px] md:text-xs tracking-wide">
                        <div class="text-sky-300/90 font-semibold uppercase">{b.leftLabel}</div>
                        <div class="text-white/60 font-semibold uppercase">{b.rightLabel}</div>
                    </div>
                </div>
            );
        })}
    </div>
</div>

<style>
/* 细微阴影和暗色适配已由容器类完成，这里保留空块以便后续扩展 */
</style>


